<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">

<title>Atividade – Pesquisa Bibliográfica e Eletrônica</title>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<style>
body{
    background: linear-gradient(135deg,#1e3a8a,#2563eb);
    min-height:100vh;
    font-family: Arial, Helvetica, sans-serif;
}
.container-box{
    max-width:700px;
    margin:auto;
    margin-top:30px;
    background:white;
    padding:25px;
    border-radius:15px;
    box-shadow:0 10px 30px rgba(0,0,0,0.2);
}
.hidden{display:none;}
textarea{resize:none;}
</style>
</head>

<body>

<div class="container-box">

<h4 class="text-center text-primary mb-3">
Atividade – Pesquisa Bibliográfica e Eletrônica
</h4>

<div id="etapa1">

<p><b>Situação:</b><br>
A empresa precisa entender o que é controle de estoque e como ele funciona.
Você deve buscar essa informação para explicar ao supervisor.</p>

<p>Escolha o tipo de pesquisa que você irá utilizar:</p>

<button class="btn btn-outline-primary w-100 mb-2" onclick="escolher('Bibliográfica')">
Pesquisa Bibliográfica
</button>

<button class="btn btn-outline-success w-100" onclick="escolher('Eletrônica')">
Pesquisa Eletrônica
</button>

</div>

<div id="etapa2" class="hidden">

<h5 class="mt-3">Simulação de Pesquisa</h5>

<p id="descricaoPesquisa"></p>

<hr>

<label>1. O que é controle de estoque?</label>
<textarea id="resp1" class="form-control mb-3" rows="3"></textarea>

<label>2. Onde você encontrou essa informação?</label>
<textarea id="resp2" class="form-control mb-3" rows="2"></textarea>

<label>3. A informação parecia confiável? Por quê?</label>
<textarea id="resp3" class="form-control mb-3" rows="3"></textarea>

<button class="btn btn-primary w-100" onclick="finalizar()">
Finalizar Atividade
</button>

</div>

<div id="resultado" class="hidden mt-3">

<h5 class="text-success">Reflexão Final</h5>
<p id="comparacao"></p>

<button class="btn btn-danger w-100 mt-3" onclick="gerarPDF()">
Salvar em PDF
</button>

</div>

</div>

<script>

const { jsPDF } = window.jspdf;

let tipoEscolhido = "";
let respostas = {};

function escolher(tipo){
    tipoEscolhido = tipo;
    document.getElementById("etapa1").classList.add("hidden");
    document.getElementById("etapa2").classList.remove("hidden");

    document.getElementById("descricaoPesquisa").innerHTML =
    "<b>Você escolheu Pesquisa " + tipo + ".</b>";
}

function finalizar(){

    let r1 = document.getElementById("resp1").value.trim();
    let r2 = document.getElementById("resp2").value.trim();
    let r3 = document.getElementById("resp3").value.trim();

    if(r1 === "" || r2 === "" || r3 === ""){
        alert("Responda todas as perguntas.");
        return;
    }

    respostas.resp1 = r1;
    respostas.resp2 = r2;
    respostas.resp3 = r3;

    document.getElementById("etapa2").classList.add("hidden");
    document.getElementById("resultado").classList.remove("hidden");

    if(tipoEscolhido === "Bibliográfica"){
        document.getElementById("comparacao").innerHTML =
        "A pesquisa bibliográfica costuma ser mais estruturada e confiável, pois utiliza materiais revisados como livros e apostilas.";
    } else {
        document.getElementById("comparacao").innerHTML =
        "A pesquisa eletrônica é mais rápida e prática, mas exige atenção na escolha de fontes confiáveis.";
    }
}

function gerarPDF(){

    const doc = new jsPDF();
    let y = 10;

    doc.text("Atividade – Pesquisa Bibliográfica e Eletrônica", 10, y);
    y += 10;

    doc.text("Tipo de Pesquisa: " + tipoEscolhido, 10, y);
    y += 10;

    doc.text("1. O que é controle de estoque:", 10, y);
    y += 8;
    doc.text(doc.splitTextToSize(respostas.resp1, 180), 10, y);
    y += 20;

    doc.text("2. Onde encontrou a informação:", 10, y);
    y += 8;
    doc.text(doc.splitTextToSize(respostas.resp2, 180), 10, y);
    y += 20;

    doc.text("3. A informação parecia confiável? Por quê:", 10, y);
    y += 8;
    doc.text(doc.splitTextToSize(respostas.resp3, 180), 10, y);
    y += 20;

    doc.save("Atividade_Pesquisa.pdf");
}

</script>

</body>
</html>
